// room script file

function hHotspot1_WalkOn()
{
  player.ChangeRoom(7,  200, 150);
}

function room_FirstLoad()
{
  bars.Solid = true;
  if(cellar_switch_on)
    RestoreWalkableArea(2);
  else
    RemoveWalkableArea(2);
}

function bars_Look()
{
  player.Say("Those are some sturdy bars");
}

function bars_Talk()
{
  player.Say("Hey bars");
}

function bars_Interact()
{
  player.Walk(bars.X, 150, eBlock, eWalkableAreas);
  player.Say("They won't budge");
}

function room_Load()
{
  if(cellar_switch_on)
  {
    RestoreWalkableArea(2);
    bars.Visible = false;
  }
  else
  {
    RemoveWalkableArea(2);
    bars.Visible = true;
  }
}

function paper_Interact()
{
  if(cellar_switch_on)
  {
    cEffectsChar.ChangeRoom(9, bars.X + 10,  150);
    player.Walk(paper.X, paper.Y, eBlock, eWalkableAreas);
    player.Say("It's the third page of the book");
    player.Say("It says: \"Under his home he found a switch that he pulled.\"");
    player.Say("\"He then got trapped inside a cell.\"");
    paper.Visible = false;
    bars.Visible = true;
    cEffectsChar.Say("*SLAM*");
    player.FaceLocation(player.x - 1, player.y, eBlock);
    player.Say("AAAH");
    object[bars.ID].Baseline = 500;
    RemoveWalkableArea(1);
  }
}
